# 문제:나머지합(10986)

수 N개 A1, A2, ..., AN이 주어진다. 이때, 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 구하는 프로그램을 작성하시오.

즉, Ai + ... + Aj (i ≤ j) 의 합이 M으로 나누어 떨어지는 (i, j) 쌍의 개수를 구해야 한다.

## 입력

첫째 줄에 N과 M이 주어진다. (1 ≤ N ≤ 10^6, 2 ≤ M ≤ 10^3)

둘째 줄에 N개의 수 A1, A2, ..., AN이 주어진다. (0 ≤ Ai ≤ 10^9)

## 출력

첫째 줄에 연속된 부분 구간의 합이 M으로 나누어 떨어지는 구간의 개수를 출력한다.

##해결방법

10^3은 2^10정도 되며 10^15 는 2^31-1보다 크므로 int를 사용해서는 안된다.

<br/>

N^2 이상의 시간이 걸리면 안된다.

매 순간의 합을 배열로 저장해서 구하는 건 안되고

각각 연속된 부분 구간의 합을 n번의 탐색으로 모두 구해야한다.

즉, 한번이라도 탐색된 부분은 다시 탐색하지 않도록 반복하지 않아야 한다.

그러므로 동적프로그래밍 기법을 이용한다.

<br/>

0부터 i까지의 합을 적은 누적 합 배열을 만든다.

누적합 배열의 원소끼리 빼주면 부분 구간의 합을 알수있으며

각 원소에서 m을 나눈 나머지는 0부터 m-1까지 나올 수 있다.

그런데 구해야 하는 건 나머지가 0인 부분 구간의 합이다.

그 말은 나머지가 1인 원소와 나머지가 1인 또다른 원소를 선택해서 

큰 쪽에서 작은 쪽을 빼주면 나머지가 0이 된다. 즉 0부터 m-1까지의 나머지의 개수를 각각 구하고

그중에서 2개를 선택하는 것이므로 조합을 이용하여 해결한다.

예시로 1 2 3 1 2 라는 5개의 수가 주어졌을 때, m=3이라고 해보자

누적합 배열의 원소는 1 3 6 7 9가 될 것이며 나머지는 1 0 0 1 0 이 된다.

나머지가 2인 원소의 개수는 0,

나머지가 1인 원소의 개수는 2이고 2C2 = 1  

(누적합이 7인 원소에서 1인 원소를 빼면 나머지가 0이 된다. 이는 2 3 1의 부분 구간의 합이다.)

나머지가 0인 원소의 개수는 3인데 나머지가 0이면 원소끼리 빼주지 않아도 되는 선택지도 존재하니 선택할 수 있는 경우의 수 1개 늘어난 4이다.

즉 4C2 = 6

1 + 6이므로 답은 7이된다.

## 복잡도

n+m이고 m은 n보다 작으므로

시간,공간복잡도는 o(n)이 된다

