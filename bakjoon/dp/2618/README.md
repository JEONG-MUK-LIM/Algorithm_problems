# 문제: 2618(경찰차)

이 도시에는 두 대의 경찰차가 있으며 두 차를 경찰차1과 경찰차2로 부른다. 처음에는 항상 경찰차1은 (1, 1)의 위치에 있고 경찰차2는 (N, N)의 위치에 있다. 경찰 본부에서는 처리할 사건이 있으면 그 사건이 발생된 위치를 두 대의 경찰차 중 하나에 알려 주고, 연락 받은 경찰차는 그 위치로 가장 빠른 길을 통해 이동하여 사건을 처리한다. (하나의 사건은 한 대의 경찰차가 처리한다.) 그리고 사건을 처리 한 경찰차는 경찰 본부로부터 다음 연락이 올 때까지 처리한 사건이 발생한 위치에서 기다린다. 경찰 본부에서는 사건이 발생한 순서대로 두 대의 경찰차에 맡기려고 한다. 처리해야 될 사건들은 항상 교차로에서 발생하며 경찰 본부에서는 이러한 사건들을 나누어 두 대의 경찰차에 맡기되, 두 대의 경찰차들이 이동하는 거리의 합을 최소화 하도록 사건을 맡기려고 한다.

예를 들어 앞의 그림처럼 N=6인 경우, 처리해야 하는 사건들이 3개 있고 그 사건들이 발생된 위치 를 순서대로 (3, 5), (5, 5), (2, 3)이라고 하자. (3, 5)의 사건을 경찰차2에 맡기고 (5, 5)의 사건도 경찰차2에 맡기며, (2, 3)의 사건을 경찰차1에 맡기면 두 차가 이동한 거리의 합은 4 + 2 + 3 = 9가 되 고, 더 이상 줄일 수는 없다.

처리해야 할 사건들이 순서대로 주어질 때, 두 대의 경찰차가 이동하는 거리의 합을 최소화 하도록 사건들을 맡기는 프로그램을 작성하시오.

## 입력

첫째 줄에는 동서방향 도로의 개수를 나타내는 정수 N(5 ≤ N ≤ 1,000)이 주어진다. 둘째 줄에는 처리해야 하는 사건의 개수를 나타내는 정수 W(1 ≤ W ≤ 1,000)가 주어진다. 셋째 줄부터 (W+2)번째 줄까지 사건이 발생된 위치가 한 줄에 하나씩 주어진다. 경찰차들은 이 사건들을 주어진 순서대로 처리해야 한다. 각 위치는 동서방향 도로 번호를 나타내는 정수와 남북방향 도로 번호를 나타내는 정수로 주어지며 두 정수 사이에는 빈칸이 하나 있다. 두 사건이 발생한 위치가 같을 수 있다.

## 출력

첫째 줄에 두 경찰차가 이동한 총 거리를 출력한다. 둘째 줄부터 시작하여 (i+1)번째 줄에 i(1 ≤ i ≤ W)번째 사건이 맡겨진 경찰차 번호 1 또는 2를 출력한다.

## 해결방법

이 문제의 특징은 바로 직전의 들어온 입력으로 구한 dp값이 지금의 입력이 들어왔을 때의 dp값을 구하는데 영향이 없다는 것이다. 현재의 입력이 들어옴으로써 답이 완전히 달라질 수 있음을 인지해야한다.

그러므로 점화식을 찾으려면 이전의 dp값으로부터 현재의 dp값을 추정하기 보단, 현재의 dp값을 가지고 다음의 dp값을 추정해야한다.

또 연속적인 데이터가 포함된다는 보장이 없기 때문에 각 인덱스는 범위를 나타내서는 안된다. 

경찰차가 두개가 나누어져 있기에 2차원 dp의 각각의 인덱스는 1번 경찰차와 2번 경찰차를 나타내는 의미를 갖도록 한다.

즉 dp[a][b]는 1번 경찰차는 a를, 2번 경찰차는 b를 갖는다.

a,b는 각각 1번부터 w까지의 사건의 번호내의 값이 된다.

여기서 다음 dp값을 추정하기 위해 dp[a][b]에서 다음의 입력 k가 들어올 경우 두 경우로 나눌 수있다.

1번경찰차가 k를 처리하는 경우와 2번 경찰차가 k를 처리하는 경우이다.

그러면 a,b는 각 경찰차가 마지막으로 처리한 사건의 번호가 되면 앞뒤가 맞아 떨어지게 된다.

dp[a][k]와 dp[k][b]로 이어질 수 있고, a,b는 둘중에 큰 것이 k-1이 되므로

k = max(a,b) + 1이 된다.

각각 사건b의 좌표에서 사건k의 좌표로 가는 데 필요한 거리, 사건 a좌표에서 사건 k의 좌표로 가는데 필요한 거리를 구해서 min값을 dp[a][k]와 dp[k][b]에 반복문으로 수정하면 답을 구할 수 있고, 2차원벡터를 이용해서 각 좌표에 이전에서 온 dp의 좌표를 기록해두면 역추적으로 어떤 경찰차가 처리했는지 알아낼 수 있다.


참고로 사건 0에서 사건 k로 가는 경우를 주의해서 거리값을 구해야한다.

## 복잡도

시공간모두 o(W^2)