# 문제: 6549(히스토그램에서 가장 큰 직사각형)

히스토그램은 직사각형 여러 개가 아래쪽으로 정렬되어 있는 도형이다. 각 직사각형은 같은 너비를 가지고 있지만, 높이는 서로 다를 수도 있다. 

히스토그램에서 가장 넓이가 큰 직사각형을 구하는 프로그램을 작성하시오.

## 입력

입력은 테스트 케이스 여러 개로 이루어져 있다. 각 테스트 케이스는 한 줄로 이루어져 있고, 직사각형의 수 n이 가장 처음으로 주어진다. (1 ≤ n ≤ 100,000) 그 다음 n개의 정수 h1, ..., hn (0 ≤ hi ≤ 1,000,000,000)가 주어진다. 이 숫자들은 히스토그램에 있는 직사각형의 높이이며, 왼쪽부터 오른쪽까지 순서대로 주어진다. 모든 직사각형의 너비는 1이고, 입력의 마지막 줄에는 0이 하나 주어진다.

## 출력

각 테스트 케이스에 대해서, 히스토그램에서 가장 넓이가 큰 직사각형의 넓이를 출력한다.

## 해결방법

이 문제는 스택과 재귀인 분할정복(+세그먼트 트리)으로 해결할 수 있다.

이 풀이는 분할정복과 세그먼트 트리를 활용해서 푼 것이고 스택의 경우에는 data structure에 있는 파일을 참고할 것

<br/>
이 문제에서 특정한 막대를 기준으로 최대 넓이가 선택되는 경우는 다음과 같다.

1. 현재 막대의 왼쪽에서 (현재막대는 제외) 최대 넓이가 선택되었다.

2. 현재 막대의 높이와 가능한 너비를 기준으로 최대 넓이가 선택 되었다.

3. 현재 막대의 오른쪽에서 최대 넓이가 선택 되었다.

그런데 2번에서 현재 막대의 높이가 얼마이고, 가능한 너비가 얼마인지 일일이 기록하는 게 아닌 이상 너비를 쉽게 알아 낼 수없다. 이를 다 기록하게 되면 n^2이 되어 시간이 초과하게 될 것이다.(10^10번 연산)

하지만 현재 막대가 정해진 구간에서 가장 작은 막대일 경우에 정해진 구간만큼이 너비가 된다. 이때는 일일이 너비를 구할 필요가 없다.

즉 특정한 구간의 가장 작은 막대를 log n 번의 연산에 찾을 수만 있다면 n log n번의 연산이 가능하게 될 것이다.

문제는 매번 정렬하는 것도 안되고 구간이 나눠지기 때문에 힙을 사용할 수도 없다.

이때는 세그먼트 트리를 이용하면 가장 작은 값을 log번의 연산에서 찾을 수 있다.

<br/>

세그먼트 트리란 구간합이나 구간 최솟값을 쉽게 찾을 수 있도록 만든 트리이며

누적합과 다르게 특정 원소의 값이 변하는 경우 매우 빠르게 값을 수정할 수 있다.

특이사항은 이 문제는 세그먼트 트리에 높이 값 그자체가 아니라 인덱스를 넣어야 한다는 점과 구간을 나타내는 파라미터인 left,right가 범위를 벗어나는 경우를 처리해줘야한다.

## 복잡도

트리를 빌드하는데 o(N)

분할정복트리는 최악의 경우 매번 한칸씩만 분할 될 수 있다. 그러므로 o(N)

매 분할시마다 최솟값을 찾는 쿼리 o(log N)

즉 o(Nlog N)이 된다.

공간복잡도는 o(N)
